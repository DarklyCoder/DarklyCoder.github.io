<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="征服技术">
<meta property="og:type" content="website">
<meta property="og:title" content="zhangqiyang的小站">
<meta property="og:url" content="http://zhangqiyang.ren/index.html">
<meta property="og:site_name" content="zhangqiyang的小站">
<meta property="og:description" content="征服技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zhangqiyang的小站">
<meta name="twitter:description" content="征服技术">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> zhangqiyang的小站 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?5d9f062022728d2ef3b4d5e23e106d38";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">zhangqiyang的小站</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">追梦者</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/07/27/java_遍历map/" itemprop="url">
                  java遍历Map集合
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-07-27T18:08:20+08:00" content="2013-07-27">
              2013-07-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/07/27/java_遍历map/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/07/27/java_遍历map/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="u6700_u5E38_u89C4_u7684_u4E00_u79CD_u904D_u5386_u65B9_u6CD5_uFF0C_u6700_u5E38_u89C4_u5C31_u662F_u6700_u5E38_u7528_u7684_uFF0C_u867D_u7136_u4E0D_u590D_u6742_uFF0C_u4F46_u5F88_u91CD_u8981_uFF0C_u8FD9_u662F_u6211_u4EEC_u6700_u719F_u6089_u7684_uFF0C_u5C31_u4E0D_u591A_u8BF4_u4E86_uFF01_uFF01"><a href="#u6700_u5E38_u89C4_u7684_u4E00_u79CD_u904D_u5386_u65B9_u6CD5_uFF0C_u6700_u5E38_u89C4_u5C31_u662F_u6700_u5E38_u7528_u7684_uFF0C_u867D_u7136_u4E0D_u590D_u6742_uFF0C_u4F46_u5F88_u91CD_u8981_uFF0C_u8FD9_u662F_u6211_u4EEC_u6700_u719F_u6089_u7684_uFF0C_u5C31_u4E0D_u591A_u8BF4_u4E86_uFF01_uFF01" class="headerlink" title="最常规的一种遍历方法，最常规就是最常用的，虽然不复杂，但很重要，这是我们最熟悉的，就不多说了！！"></a>最常规的一种遍历方法，最常规就是最常用的，虽然不复杂，但很重要，这是我们最熟悉的，就不多说了！！</h4><pre><code>public static void work(Map&lt;String, String&gt; map) {
    Collection&lt;String&gt; c = map.values();
    Iterator it = c.iterator();
    while (it.hasNext()) {
        System.out.println(it.next());
    }
}
</code></pre><h4 id="u5229_u7528keyset_u8FDB_u884C_u904D_u5386_2C_u5B83_u7684_u4F18_u70B9_u5728_u4E8E_u53EF_u4EE5_u6839_u636E_u4F60_u6240_u60F3_u8981_u7684key_u503C_u5F97_u5230_u4F60_u60F3_u8981_u7684_values_uFF0C_u66F4_u5177_u7075_u6D3B_u6027_uFF01_uFF01"><a href="#u5229_u7528keyset_u8FDB_u884C_u904D_u5386_2C_u5B83_u7684_u4F18_u70B9_u5728_u4E8E_u53EF_u4EE5_u6839_u636E_u4F60_u6240_u60F3_u8981_u7684key_u503C_u5F97_u5230_u4F60_u60F3_u8981_u7684_values_uFF0C_u66F4_u5177_u7075_u6D3B_u6027_uFF01_uFF01" class="headerlink" title="利用keyset进行遍历,它的优点在于可以根据你所想要的key值得到你想要的 values，更具灵活性！！"></a>利用keyset进行遍历,它的优点在于可以根据你所想要的key值得到你想要的 values，更具灵活性！！</h4><pre><code>public static void workByKeySet(Map&lt;String, String&gt; map) {
    Set&lt;String&gt; key = map.keySet();
    for (Iterator it = key.iterator(); it.hasNext();) {
        String s = (String) it.next();
        System.out.println(map.get(s));
    }
}
</code></pre><h4 id="u6BD4_u8F83_u590D_u6742_u7684_u4E00_u79CD_u904D_u5386_u5728_u8FD9_u91CC_uFF0C_u5B83_u7684_u7075_u6D3B_u6027_u592A_u5F3A_u4E86_uFF0C_u60F3_u5F97_u5230_u4EC0_u4E48_u5C31_u80FD_u5F97_u5230_u4EC0_u4E48_uFF01_uFF01"><a href="#u6BD4_u8F83_u590D_u6742_u7684_u4E00_u79CD_u904D_u5386_u5728_u8FD9_u91CC_uFF0C_u5B83_u7684_u7075_u6D3B_u6027_u592A_u5F3A_u4E86_uFF0C_u60F3_u5F97_u5230_u4EC0_u4E48_u5C31_u80FD_u5F97_u5230_u4EC0_u4E48_uFF01_uFF01" class="headerlink" title="比较复杂的一种遍历在这里，它的灵活性太强了，想得到什么就能得到什么！！"></a>比较复杂的一种遍历在这里，它的灵活性太强了，想得到什么就能得到什么！！</h4><pre><code>public static void workByEntry(Map&lt;String, String&gt; map) {
    Set&lt;Map.Entry&lt;String, String&gt;&gt; set = map.entrySet();
    for (Iterator&lt;Map.Entry&lt;String, String&gt;&gt; it = set.iterator(); it.hasNext();) {
        Map.Entry&lt;String, String&gt; entry = (Map.Entry&lt;String, String&gt;) it.next();
        System.out.println(entry.getKey() + &quot;---&gt;&quot; + entry.getValue());
    }
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/07/27/java_String_format使用/" itemprop="url">
                  java中String.format使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-07-27T18:08:20+08:00" content="2013-07-27">
              2013-07-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/07/27/java_String_format使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/07/27/java_String_format使用/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>　　在JDK1.5中，String类增加了一个非常有用的静态函数format(String  format, Objece…  argues)，可以将各类数据格式化为字符串并输出。其中format参数指定了输出的格式，是最复杂也是最难掌握的一点，而argues则是一系列等待被格式化的对象。该函数对c语言中printf函数的用法进行了一定的模仿，因此有c语言基础的人学起来会轻松许多。下面我们着重讨论一下format 参数的格式及含义。<br>　　format参数中可以包含不需要转化的字符串，这些字符串是你写什么，最终就输出什么。同时还包含一些特殊格式的内容，来指定将哪个对象来转换，以及转换成什么形式。这种特殊的格式通通以%index$开头，index从1开始取值，表示将第index个参数拿进来进行格式化。这一点比c语言要强一点， c语言只能按照参数的顺序依次格式化，而Java可以选择第n个参数来格式化。由于该函数可以对任意一个对象进行格式化，不同的对象适用的参数也不同，因此我们下面分类来讨论。</p>
<h4 id="u5BF9_u6574_u6570_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A_25_5Bindex_24_5D_5B_u6807_u8BC6_5D_5B_u6700_u5C0F_u5BBD_u5EA6_5D_u8F6C_u6362_u65B9_u5F0F"><a href="#u5BF9_u6574_u6570_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A_25_5Bindex_24_5D_5B_u6807_u8BC6_5D_5B_u6700_u5C0F_u5BBD_u5EA6_5D_u8F6C_u6362_u65B9_u5F0F" class="headerlink" title="对整数进行格式化：%[index$][标识][最小宽度]转换方式"></a>对整数进行格式化：%[index$][标识][最小宽度]转换方式</h4><p>　　我们可以看到，格式化字符串由4部分组成，其中%[index$]的含义我们上面已经讲过，[最小宽度]的含义也很好理解，就是最终该整数转化的字符串最少包含多少位数字。我们来看看剩下2个部分的含义吧：</p>
<h5 id="u6807_u8BC6_uFF1A"><a href="#u6807_u8BC6_uFF1A" class="headerlink" title="标识："></a>标识：</h5><pre><code>&apos;-&apos;    在最小宽度内左对齐，不可以与“用0填充”同时使用
&apos;#&apos;    只适用于8进制和16进制，8进制时在结果前面增加一个0，16进制时在结果前面增加0x
&apos;+&apos;    结果总是包括一个符号（一般情况下只适用于10进制，若对象为BigInteger才可以用于8进制和16进制）
&apos;  &apos;    正值前加空格，负值前加负号（一般情况下只适用于10进制，若对象为BigInteger才可以用于8进制和16进制）
&apos;0&apos;    结果将用零来填充
&apos;,&apos;    只适用于10进制，每3位数字之间用“，”分隔
&apos;(&apos;    若参数是负数，则结果中不添加负号而是用圆括号把数字括起来（同‘+’具有同样的限制）
</code></pre><h5 id="u8F6C_u6362_u65B9_u5F0F_uFF1A"><a href="#u8F6C_u6362_u65B9_u5F0F_uFF1A" class="headerlink" title="转换方式："></a>转换方式：</h5><pre><code>d-十进制   o-八进制   x或X-十六进制
</code></pre><p>　　上面的说明过于枯燥，我们来看几个具体的例子。需要特别注意的一点是：大部分标识字符可以同时使用。</p>
<pre><code>System.out.println(String.format(&quot;%1$,09d&quot;, -3123));  //-0003,123
System.out.println(String.format(&quot;%1$9d&quot;, -31));      //      -31
System.out.println(String.format(&quot;%1$-9d&quot;, -31));     //-31 
System.out.println(String.format(&quot;%1$(9d&quot;, -31));     //     (31)
System.out.println(String.format(&quot;%1$#9x&quot;, 5689));    //   0x1639
</code></pre><h4 id="u5BF9_u6D6E_u70B9_u6570_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A_25_5Bindex_24_5D_5B_u6807_u8BC6_5D_5B_u6700_u5C11_u5BBD_u5EA6_5D_5B-_u7CBE_u5EA6_5D_u8F6C_u6362_u65B9_u5F0F"><a href="#u5BF9_u6D6E_u70B9_u6570_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A_25_5Bindex_24_5D_5B_u6807_u8BC6_5D_5B_u6700_u5C11_u5BBD_u5EA6_5D_5B-_u7CBE_u5EA6_5D_u8F6C_u6362_u65B9_u5F0F" class="headerlink" title="对浮点数进行格式化：%[index$][标识][最少宽度][.精度]转换方式"></a>对浮点数进行格式化：%[index$][标识][最少宽度][.精度]转换方式</h4><p>　　我们可以看到，浮点数的转换多了一个“精度”选项，可以控制小数点后面的位数。</p>
<h5 id="u6807_u8BC6_uFF1A-1"><a href="#u6807_u8BC6_uFF1A-1" class="headerlink" title="标识："></a>标识：</h5><pre><code>&apos;-&apos;    在最小宽度内左对齐，不可以与“用0填充”同时使用
&apos;+&apos;    结果总是包括一个符号
&apos;  &apos;    正值前加空格，负值前加负号
&apos;0&apos;    结果将用零来填充
&apos;,&apos;    每3位数字之间用“，”分隔（只适用于fgG的转换）
&apos;(&apos;    若参数是负数，则结果中不添加负号而是用圆括号把数字括起来（只适用于eEfgG的转换）
</code></pre><h5 id="u8F6C_u6362_u65B9_u5F0F_uFF1A-1"><a href="#u8F6C_u6362_u65B9_u5F0F_uFF1A-1" class="headerlink" title="转换方式："></a>转换方式：</h5><pre><code>&apos;e&apos;, &apos;E&apos;  --  结果被格式化为用计算机科学记数法表示的十进制数
&apos;f&apos;       --  结果被格式化为十进制普通表示方式
&apos;g&apos;, &apos;G&apos;  --  根据具体情况，自动选择用普通表示方式还是科学计数法方式
&apos;a&apos;, &apos;A&apos;  --   结果被格式化为带有效位数和指数的十六进制浮点数
</code></pre><h4 id="u5BF9_u5B57_u7B26_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A"><a href="#u5BF9_u5B57_u7B26_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A" class="headerlink" title="对字符进行格式化："></a>对字符进行格式化：</h4><p>　　对字符进行格式化是非常简单的，c表示字符，标识中’-‘表示左对齐，其他就没什么了。</p>
<h4 id="u5BF9_u767E_u5206_u6BD4_u7B26_u53F7_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A"><a href="#u5BF9_u767E_u5206_u6BD4_u7B26_u53F7_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A" class="headerlink" title="对百分比符号进行格式化："></a>对百分比符号进行格式化：</h4><p>　　看了上面的说明，大家会发现百分比符号“%”是特殊格式的一个前缀。那么我们要输入一个百分比符号该怎么办呢？肯定是需要转义字符的,但是要注意的是，在这里转义字符不是“\”，而是“%”。换句话说，下面这条语句可以输出一个“12%”：<br><code>System.out.println(String.format(&quot;%1$d%%&quot;, 12));</code></p>
<h4 id="u53D6_u5F97_u5E73_u53F0_u72EC_u7ACB_u7684_u884C_u5206_u9694_u7B26_uFF1A"><a href="#u53D6_u5F97_u5E73_u53F0_u72EC_u7ACB_u7684_u884C_u5206_u9694_u7B26_uFF1A" class="headerlink" title="取得平台独立的行分隔符："></a>取得平台独立的行分隔符：</h4><p>　　<code>System.getProperty(&quot;line.separator&quot;)</code>可以取得平台独立的行分隔符，但是用在format中间未免显得过于烦琐了。于是format函数自带了一个平台独立的行分隔符那就是<code>String.format(&quot;%n&quot;)</code>。</p>
<h4 id="u5BF9_u65E5_u671F_u7C7B_u578B_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A"><a href="#u5BF9_u65E5_u671F_u7C7B_u578B_u8FDB_u884C_u683C_u5F0F_u5316_uFF1A" class="headerlink" title="对日期类型进行格式化："></a>对日期类型进行格式化：</h4><p>　　以下日期和时间转换的后缀字符是为 ‘t’ 和 ‘T’ 转换定义的。这些类型相似于但不完全等同于那些由 GNU date 和 POSIX strftime(3c) 定义的类型。提供其他转换类型是为了访问特定于 Java 的功能（如将 ‘L’ 用作秒中的毫秒）。</p>
<h5 id="u4EE5_u4E0B_u8F6C_u6362_u5B57_u7B26_u7528_u6765_u683C_u5F0F_u5316_u65F6_u95F4_uFF1A"><a href="#u4EE5_u4E0B_u8F6C_u6362_u5B57_u7B26_u7528_u6765_u683C_u5F0F_u5316_u65F6_u95F4_uFF1A" class="headerlink" title="以下转换字符用来格式化时间："></a>以下转换字符用来格式化时间：</h5><pre><code>&apos;H&apos;     24 小时制的小时，被格式化为必要时带前导零的两位数，即 00 - 23。
&apos;I&apos;     12 小时制的小时，被格式化为必要时带前导零的两位数，即 01 - 12。
&apos;k&apos;     24 小时制的小时，即 0 - 23。
&apos;l&apos;     12 小时制的小时，即 1 - 12。
&apos;M&apos;     小时中的分钟，被格式化为必要时带前导零的两位数，即 00 - 59。
&apos;S&apos;     分钟中的秒，被格式化为必要时带前导零的两位数，即 00 - 60 （&quot;60&quot; 是支持闰秒所需的一个特殊值）。
&apos;L&apos;     秒中的毫秒，被格式化为必要时带前导零的三位数，即 000 - 999。
&apos;N&apos;     秒中的毫微秒，被格式化为必要时带前导零的九位数，即 000000000 - 999999999。
&apos;p&apos;     特定于语言环境的 上午或下午 标记以小写形式表示，例如 &quot;am&quot; 或 &quot;pm&quot;。使用转换前缀 &apos;T&apos; 可以强行将此输出转换为大写形式。
&apos;z&apos;     相对于 GMT 的 RFC 822 格式的数字时区偏移量，例如 -0800。
&apos;Z&apos;     表示时区缩写形式的字符串。Formatter 的语言环境将取代参数的语言环境（如果有）。
&apos;s&apos;     自协调世界时 (UTC) 1970 年 1 月 1 日 00:00:00 至现在所经过的秒数，即 Long.MIN_VALUE/1000 与 Long.MAX_VALUE/1000 之间的差值。
&apos;Q&apos;     自协调世界时 (UTC) 1970 年 1 月 1 日 00:00:00 至现在所经过的毫秒数，即 Long.MIN_VALUE 与 Long.MAX_VALUE 之间的差值。
</code></pre><h5 id="u4EE5_u4E0B_u8F6C_u6362_u5B57_u7B26_u7528_u6765_u683C_u5F0F_u5316_u65E5_u671F_uFF1A"><a href="#u4EE5_u4E0B_u8F6C_u6362_u5B57_u7B26_u7528_u6765_u683C_u5F0F_u5316_u65E5_u671F_uFF1A" class="headerlink" title="以下转换字符用来格式化日期："></a>以下转换字符用来格式化日期：</h5><pre><code>&apos;B&apos;     特定于语言环境的月份全称，例如 &quot;January&quot; 和 &quot;February&quot;。
&apos;b&apos;     特定于语言环境的月份简称，例如 &quot;Jan&quot; 和 &quot;Feb&quot;。
&apos;h&apos;     与 &apos;b&apos; 相同。
&apos;A&apos;     特定于语言环境的星期几全称，例如 &quot;Sunday&quot; 和 &quot;Monday&quot;
&apos;a&apos;     特定于语言环境的星期几简称，例如 &quot;Sun&quot; 和 &quot;Mon&quot;
&apos;C&apos;     除以 100 的四位数表示的年份，被格式化为必要时带前导零的两位数，即 00 - 99
&apos;Y&apos;     年份，被格式化为必要时带前导零的四位数（至少），例如，0092 等于格里高利历的 92 CE。
&apos;y&apos;     年份的最后两位数，被格式化为必要时带前导零的两位数，即 00 - 99。
&apos;j&apos;     一年中的天数，被格式化为必要时带前导零的三位数，例如，对于格里高利历是 001 - 366。
&apos;m&apos;     月份，被格式化为必要时带前导零的两位数，即 01 - 13。
&apos;d&apos;     一个月中的天数，被格式化为必要时带前导零两位数，即 01 - 31
&apos;e&apos;     一个月中的天数，被格式化为两位数，即 1 - 31。
</code></pre><h5 id="u4EE5_u4E0B_u8F6C_u6362_u5B57_u7B26_u7528_u4E8E_u683C_u5F0F_u5316_u5E38_u89C1_u7684_u65E5_u671F/_u65F6_u95F4_u7EC4_u5408_u3002"><a href="#u4EE5_u4E0B_u8F6C_u6362_u5B57_u7B26_u7528_u4E8E_u683C_u5F0F_u5316_u5E38_u89C1_u7684_u65E5_u671F/_u65F6_u95F4_u7EC4_u5408_u3002" class="headerlink" title="以下转换字符用于格式化常见的日期/时间组合。"></a>以下转换字符用于格式化常见的日期/时间组合。</h5><pre><code>&apos;R&apos;     24 小时制的时间，被格式化为 &quot;%tH:%tM&quot;
&apos;T&apos;     24 小时制的时间，被格式化为 &quot;%tH:%tM:%tS&quot;。
&apos;r&apos;     12 小时制的时间，被格式化为 &quot;%tI:%tM:%tS %Tp&quot;。上午或下午标记 (&apos;%Tp&apos;) 的位置可能与语言环境有关。 
&apos;D&apos;     日期，被格式化为 &quot;%tm/%td/%ty&quot;。
&apos;F&apos;     ISO 8601 格式的完整日期，被格式化为 &quot;%tY-%tm-%td&quot;。
&apos;c&apos;     日期和时间，被格式化为 &quot;%ta %tb %td %tT %tZ %tY&quot;，例如 &quot;Sun Jul 20 16:17:00 EDT 1969&quot;。
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2013/07/27/android_MediaPlayer状态机/" itemprop="url">
                  MediaPlayer状态机
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-07-27T18:08:20+08:00" content="2013-07-27">
              2013-07-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/android/MediaPlayer/" itemprop="url" rel="index">
                    <span itemprop="name">MediaPlayer</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2013/07/27/android_MediaPlayer状态机/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2013/07/27/android_MediaPlayer状态机/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>　　MediaPlayer类可用于控制音频/视频文件或流的播放。</p>
<p>　　对播放音频/视频文件和流的控制是通过一个状态机来管理的。下图显示一个MediaPlayer对象被支持的播放控制操作驱动的生命周期和状态。椭圆代表MediaPlayer对象可能驻留的状态。弧线表示驱动MediaPlayer在各个状态之间迁移的播放控制操作。这里有两种类型的弧线。由一个箭头开始的弧代表同步的方法调用，而以双箭头开头的代表的弧线代表异步方法调用。</p>
<div align="center"><br>    <img src="http://hi.csdn.net/attachment/201202/21/0_1329790492uzEt.gif"><br></div>

<p>　　通过这张图，我们可以知道一个MediaPlayer对象有以下的状态：</p>
<ol>
<li><p>当一个MediaPlayer对象被刚刚用new操作符创建或是调用了reset()方法后，它就处于Idle状态。当调用了release()方法后，它就处于End状态。这两种状态之间是MediaPlayer对象的生命周期。</p>
<p> 　　在一个新构建的MediaPlayer对象和一个调用了reset()方法的MediaPlayer对象之间有一个微小的但是十分重要的差别。在处于Idle状态时，调用getCurrentPosition(), getDuration(), getVideoHeight(), getVideoWidth(), setAudioStreamType(int), setLooping(boolean), setVolume(float, float), pause(), start(), stop(), seekTo(int), prepare() 或者 prepareAsync() 方法都是编程错误。当一个MediaPlayer对象刚被构建的时候，内部的播放引擎和对象的状态都没有改变，在这个时候调用以上的那些方法，框架将无法回调客户端程序注册的OnErrorListener.onError()方法；但若这个MediaPlayer对象调用了reset()方法之后，再调用以上的那些方法，内部的播放引擎就会回调客户端程序注册的OnErrorListener.onError()方法了，并将错误的状态传入。</p>
<p> 　　我们建议，一旦一个MediaPlayer对象不再被使用，应立即调用release()方法来释放在内部的播放引擎中与这个MediaPlayer对象关联的资源。资源可能包括如硬件加速组件的单态组件，若没有调用release()方法可能会导致之后的MediaPlayer对象实例无法使用这种单态硬件资源，从而退回到软件实现或运行失败。一旦MediaPlayer对象进入了End状态，它不能再被使用，也没有办法再迁移到其它状态。</p>
<p> 　　此外，使用new操作符创建的MediaPlayer对象处于Idle状态，而那些通过重载的create()便利方法创建的MediaPlayer对象却不是处于Idle状态。事实上，如果成功调用了重载的create()方法，那么这些对象已经是Prepare状态了。 </p>
</li>
<li><p>在一般情况下，由于种种原因一些播放控制操作可能会失败，如不支持的音频/视频格式，缺少隔行扫描的音频/视频，分辨率太高，流超时等原因，等等。因此，错误报告和恢复在这种情况下是非常重要的。有时，由于编程错误，在处于无效状态的情况下调用了一个播放控制操作可能发生。在所有这些错误条件下，内部的播放引擎会调用一个由客户端程序员提供的OnErrorListener.onError()方法。客户端程序员可以通过调用MediaPlayer.setOnErrorListener（Android.media.MediaPlayer.OnErrorListener）方法来注册OnErrorListener.</p>
<p> 　　一旦发生错误，MediaPlayer对象会进入到Error状态。</p>
<p> 　　为了重用一个处于Error状态的MediaPlayer对象，可以调用reset()方法来把这个对象恢复成Idle状态。</p>
<p> 　　注册一个OnErrorListener来获知内部播放引擎发生的错误是好的编程习惯。</p>
<p> 　　在不合法的状态下调用一些方法，如prepare()，prepareAsync()和setDataSource()方法会抛出IllegalStateException异常。 </p>
</li>
<li><p>调用setDataSource(FileDescriptor)方法，或setDataSource(String)方法，或setDataSource(Context，Uri)方法，或setDataSource(FileDescriptor，long，long)方法会使处于Idle状态的对象迁移到Initialized状态。</p>
<p> 　　若当此MediaPlayer处于其它的状态下，调用setDataSource()方法，会抛出IllegalStateException异常。</p>
<p> 　　好的编程习惯是不要疏忽了调用setDataSource()方法的时候可能会抛出的IllegalArgumentException异常和IOException异常。 </p>
</li>
<li><p>在开始播放之前，MediaPlayer对象必须要进入Prepared状态。</p>
<p> 　　有两种方法（同步和异步）可以使MediaPlayer对象进入Prepared状态：要么调用prepare()方法（同步），此方法返回就表示该MediaPlayer对象已经进入了Prepared状态；要么调用prepareAsync()方法（异步），此方法会使此MediaPlayer对象进入Preparing状态并返回，而内部的播放引擎会继续未完成的准备工作。当同步版本返回时或异步版本的准备工作完全完成时就会调用客户端程序员提供的OnPreparedListener.onPrepared()监听方法。可以调用MediaPlayer.setOnPreparedListener(android.media.MediaPlayer.OnPreparedListener)方法来注册OnPreparedListener.</p>
<p> 　　Preparing是一个中间状态，在此状态下调用任何具备边影响的方法的结果都是未知的！</p>
<p> 　　在不合适的状态下调用prepare()和prepareAsync()方法会抛出IllegalStateException异常。当MediaPlayer对象处于Prepared状态的时候，可以调整音频/视频的属性，如音量，播放时是否一直亮屏，循环播放等。 </p>
</li>
<li><p>要开始播放，必须调用start()方法。当此方法成功返回时，MediaPlayer的对象处于Started状态。isPlaying()方法可以被调用来测试某个MediaPlayer对象是否在Started状态。</p>
<p> 　　当处于Started状态时，内部播放引擎会调用客户端程序员提供的OnBufferingUpdateListener.onBufferingUpdate()回调方法，此回调方法允许应用程序追踪流播放的缓冲的状态。</p>
<p> 　　对一个已经处于Started 状态的MediaPlayer对象调用start()方法没有影响。</p>
</li>
<li><p>播放可以被暂停，停止，以及调整当前播放位置。当调用pause()方法并返回时，会使MediaPlayer对象进入Paused状态。注意Started与Paused状态的相互转换在内部的播放引擎中是异步的。所以可能需要一点时间在isPlaying()方法中更新状态，若在播放流内容，这段时间可能会有几秒钟。</p>
<p> 　　调用start()方法会让一个处于Paused状态的MediaPlayer对象从之前暂停的地方恢复播放。当调用start()方法返回的时候，MediaPlayer对象的状态会又变成Started状态。</p>
<p> 　　对一个已经处于Paused状态的MediaPlayer对象pause()方法没有影响。</p>
</li>
<li><p>调用stop()方法会停止播放，并且还会让一个处于Started，Paused，Prepared或PlaybackCompleted状态的MediaPlayer进入Stopped状态。</p>
<p> 　　对一个已经处于Stopped状态的MediaPlayer对象stop()方法没有影响。</p>
</li>
<li><p>调用seekTo()方法可以调整播放的位置。</p>
<p> 　　seekTo(int)方法是异步执行的，所以它可以马上返回，但是实际的定位播放操作可能需要一段时间才能完成，尤其是播放流形式的音频/视频。当实际的定位播放操作完成之后，内部的播放引擎会调用客户端程序员提供的OnSeekComplete.onSeekComplete()回调方法。可以通过setOnSeekCompleteListener(OnSeekCompleteListener)方法注册。</p>
<p> 　　注意，seekTo(int)方法也可以在其它状态下调用，比如Prepared，Paused和PlaybackCompleted状态。此外，目前的播放位置，实际可以调用getCurrentPosition()方法得到，它可以帮助如音乐播放器的应用程序不断更新播放进度</p>
</li>
<li><p>当播放到流的末尾，播放就完成了。</p>
<p> 　　如果调用了setLooping(boolean)方法开启了循环模式，那么这个MediaPlayer对象会重新进入Started状态。</p>
<p> 　　若没有开启循环模式，那么内部的播放引擎会调用客户端程序员提供的OnCompletion.onCompletion()回调方法。可以通过调用MediaPlayer.setOnCompletionListener(OnCompletionListener)方法来设置。内部的播放引擎一旦调用了OnCompletion.onCompletion()回调方法，说明这个MediaPlayer对象进入了PlaybackCompleted状态。</p>
<p> 　　当处于PlaybackCompleted状态的时候，可以再调用start()方法来让这个MediaPlayer对象再进入Started状态。</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars2.githubusercontent.com/u/10182123?v=3&s=140"
               alt="zhangqiyang" />
          <p class="site-author-name" itemprop="name">zhangqiyang</p>
          <p class="site-description motion-element" itemprop="description">征服技术</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">3</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/DarklyCoder" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="weibo" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhangqiyang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"zhangqy"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
